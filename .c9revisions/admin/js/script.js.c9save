{"ts":1362132664993,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1362132662421,"patch":[[{"diffs":[[1,"//author= blackmwana\r\nBackbone.View.prototype.close = function() {\r\n        //http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/\r\n        console.log(this.el.localName);\r\n        console.log(this);\r\n        if (this.el.tagName.toLowerCase() === 'body') {\r\n            $('body').empty();\r\n            console.debug('emptying body');\r\n        }\r\n        else {\r\n            this.remove(); //el.remove\r\n            console.debug(this.el + ': removing view  el');\r\n        }\r\n        this.unbind();\r\n        if (this.onClose) {\r\n            this.onClose();\r\n        }\r\n    }\r\n    //////////////////\r\n$(document).ready(function() {\r\n    \r\n    var admin;\r\n    var mainView;\r\n    var cats;\r\n    var users;\r\n    var jokes;\r\n    function get_gravatar(email, size) {\r\n\r\n        // MD5 (Message-Digest Algorithm) by WebToolkit\r\n        // \r\n         \r\n        var MD5 = function(s) {\r\n            function L(k, d) {\r\n                return (k << d) | (k >>> (32 - d))\r\n            }\r\n            function K(G, k) {\r\n                var I, d, F, H, x;\r\n                F = (G & 2147483648);\r\n                H = (k & 2147483648);\r\n                I = (G & 1073741824);\r\n                d = (k & 1073741824);\r\n                x = (G & 1073741823) + (k & 1073741823);\r\n                if (I & d) {\r\n                    return (x ^ 2147483648 ^ F ^ H)\r\n                }\r\n                if (I | d) {\r\n                    if (x & 1073741824) {\r\n                        return (x ^ 3221225472 ^ F ^ H)\r\n                    }\r\n                    else {\r\n                        return (x ^ 1073741824 ^ F ^ H)\r\n                    }\r\n                }\r\n                else {\r\n                    return (x ^ F ^ H)\r\n                }\r\n            }\r\n            function r(d, F, k) {\r\n                return (d & F) | ((~d) & k)\r\n            }\r\n            function q(d, F, k) {\r\n                return (d & k) | (F & (~k))\r\n            }\r\n            function p(d, F, k) {\r\n                return (d ^ F ^ k)\r\n            }\r\n            function n(d, F, k) {\r\n                return (F ^ (d | (~k)))\r\n            }\r\n            function u(G, F, aa, Z, k, H, I) {\r\n                G = K(G, K(K(r(F, aa, Z), k), I));\r\n                return K(L(G, H), F)\r\n            }\r\n            function f(G, F, aa, Z, k, H, I) {\r\n                G = K(G, K(K(q(F, aa, Z), k), I));\r\n                return K(L(G, H), F)\r\n            }\r\n            function D(G, F, aa, Z, k, H, I) {\r\n                G = K(G, K(K(p(F, aa, Z), k), I));\r\n                return K(L(G, H), F)\r\n            }\r\n            function t(G, F, aa, Z, k, H, I) {\r\n                G = K(G, K(K(n(F, aa, Z), k), I));\r\n                return K(L(G, H), F)\r\n            }\r\n            function e(G) {\r\n                var Z;\r\n                var F = G.length;\r\n                var x = F + 8;\r\n                var k = (x - (x % 64)) / 64;\r\n                var I = (k + 1) * 16;\r\n                var aa = Array(I - 1);\r\n                var d = 0;\r\n                var H = 0;\r\n                while (H < F) {\r\n                    Z = (H - (H % 4)) / 4;\r\n                    d = (H % 4) * 8;\r\n                    aa[Z] = (aa[Z] | (G.charCodeAt(H) << d));\r\n                    H++\r\n                }\r\n                Z = (H - (H % 4)) / 4;\r\n                d = (H % 4) * 8;\r\n                aa[Z] = aa[Z] | (128 << d);\r\n                aa[I - 2] = F << 3;\r\n                aa[I - 1] = F >>> 29;\r\n                return aa\r\n            }\r\n            function B(x) {\r\n                var k = \"\",\r\n                    F = \"\",\r\n                    G, d;\r\n                for (d = 0; d <= 3; d++) {\r\n                    G = (x >>> (d * 8)) & 255;\r\n                    F = \"0\" + G.toString(16);\r\n                    k = k + F.substr(F.length - 2, 2)\r\n                }\r\n                return k\r\n            }\r\n            function J(k) {\r\n                k = k.replace(/rn/g, \"n\");\r\n                var d = \"\";\r\n                for (var F = 0; F < k.length; F++) {\r\n                    var x = k.charCodeAt(F);\r\n                    if (x < 128) {\r\n                        d += String.fromCharCode(x)\r\n                    }\r\n                    else {\r\n                        if ((x > 127) && (x < 2048)) {\r\n                            d += String.fromCharCode((x >> 6) | 192);\r\n                            d += String.fromCharCode((x & 63) | 128)\r\n                        }\r\n                        else {\r\n                            d += String.fromCharCode((x >> 12) | 224);\r\n                            d += String.fromCharCode(((x >> 6) & 63) | 128);\r\n                            d += String.fromCharCode((x & 63) | 128)\r\n                        }\r\n                    }\r\n                }\r\n                return d\r\n            }\r\n            var C = Array();\r\n            var P, h, E, v, g, Y, X, W, V;\r\n            var S = 7,\r\n                Q = 12,\r\n                N = 17,\r\n                M = 22;\r\n            var A = 5,\r\n                z = 9,\r\n                y = 14,\r\n                w = 20;\r\n            var o = 4,\r\n                m = 11,\r\n                l = 16,\r\n                j = 23;\r\n            var U = 6,\r\n                T = 10,\r\n                R = 15,\r\n                O = 21;\r\n            s = J(s);\r\n            C = e(s);\r\n            Y = 1732584193;\r\n            X = 4023233417;\r\n            W = 2562383102;\r\n            V = 271733878;\r\n            for (P = 0; P < C.length; P += 16) {\r\n                h = Y;\r\n                E = X;\r\n                v = W;\r\n                g = V;\r\n                Y = u(Y, X, W, V, C[P + 0], S, 3614090360);\r\n                V = u(V, Y, X, W, C[P + 1], Q, 3905402710);\r\n                W = u(W, V, Y, X, C[P + 2], N, 606105819);\r\n                X = u(X, W, V, Y, C[P + 3], M, 3250441966);\r\n                Y = u(Y, X, W, V, C[P + 4], S, 4118548399);\r\n                V = u(V, Y, X, W, C[P + 5], Q, 1200080426);\r\n                W = u(W, V, Y, X, C[P + 6], N, 2821735955);\r\n                X = u(X, W, V, Y, C[P + 7], M, 4249261313);\r\n                Y = u(Y, X, W, V, C[P + 8], S, 1770035416);\r\n                V = u(V, Y, X, W, C[P + 9], Q, 2336552879);\r\n                W = u(W, V, Y, X, C[P + 10], N, 4294925233);\r\n                X = u(X, W, V, Y, C[P + 11], M, 2304563134);\r\n                Y = u(Y, X, W, V, C[P + 12], S, 1804603682);\r\n                V = u(V, Y, X, W, C[P + 13], Q, 4254626195);\r\n                W = u(W, V, Y, X, C[P + 14], N, 2792965006);\r\n                X = u(X, W, V, Y, C[P + 15], M, 1236535329);\r\n                Y = f(Y, X, W, V, C[P + 1], A, 4129170786);\r\n                V = f(V, Y, X, W, C[P + 6], z, 3225465664);\r\n                W = f(W, V, Y, X, C[P + 11], y, 643717713);\r\n                X = f(X, W, V, Y, C[P + 0], w, 3921069994);\r\n                Y = f(Y, X, W, V, C[P + 5], A, 3593408605);\r\n                V = f(V, Y, X, W, C[P + 10], z, 38016083);\r\n                W = f(W, V, Y, X, C[P + 15], y, 3634488961);\r\n                X = f(X, W, V, Y, C[P + 4], w, 3889429448);\r\n                Y = f(Y, X, W, V, C[P + 9], A, 568446438);\r\n                V = f(V, Y, X, W, C[P + 14], z, 3275163606);\r\n                W = f(W, V, Y, X, C[P + 3], y, 4107603335);\r\n                X = f(X, W, V, Y, C[P + 8], w, 1163531501);\r\n                Y = f(Y, X, W, V, C[P + 13], A, 2850285829);\r\n                V = f(V, Y, X, W, C[P + 2], z, 4243563512);\r\n                W = f(W, V, Y, X, C[P + 7], y, 1735328473);\r\n                X = f(X, W, V, Y, C[P + 12], w, 2368359562);\r\n                Y = D(Y, X, W, V, C[P + 5], o, 4294588738);\r\n                V = D(V, Y, X, W, C[P + 8], m, 2272392833);\r\n                W = D(W, V, Y, X, C[P + 11], l, 1839030562);\r\n                X = D(X, W, V, Y, C[P + 14], j, 4259657740);\r\n                Y = D(Y, X, W, V, C[P + 1], o, 2763975236);\r\n                V = D(V, Y, X, W, C[P + 4], m, 1272893353);\r\n                W = D(W, V, Y, X, C[P + 7], l, 4139469664);\r\n                X = D(X, W, V, Y, C[P + 10], j, 3200236656);\r\n                Y = D(Y, X, W, V, C[P + 13], o, 681279174);\r\n                V = D(V, Y, X, W, C[P + 0], m, 3936430074);\r\n                W = D(W, V, Y, X, C[P + 3], l, 3572445317);\r\n                X = D(X, W, V, Y, C[P + 6], j, 76029189);\r\n                Y = D(Y, X, W, V, C[P + 9], o, 3654602809);\r\n                V = D(V, Y, X, W, C[P + 12], m, 3873151461);\r\n                W = D(W, V, Y, X, C[P + 15], l, 530742520);\r\n                X = D(X, W, V, Y, C[P + 2], j, 3299628645);\r\n                Y = t(Y, X, W, V, C[P + 0], U, 4096336452);\r\n                V = t(V, Y, X, W, C[P + 7], T, 1126891415);\r\n                W = t(W, V, Y, X, C[P + 14], R, 2878612391);\r\n                X = t(X, W, V, Y, C[P + 5], O, 4237533241);\r\n                Y = t(Y, X, W, V, C[P + 12], U, 1700485571);\r\n                V = t(V, Y, X, W, C[P + 3], T, 2399980690);\r\n                W = t(W, V, Y, X, C[P + 10], R, 4293915773);\r\n                X = t(X, W, V, Y, C[P + 1], O, 2240044497);\r\n                Y = t(Y, X, W, V, C[P + 8], U, 1873313359);\r\n                V = t(V, Y, X, W, C[P + 15], T, 4264355552);\r\n                W = t(W, V, Y, X, C[P + 6], R, 2734768916);\r\n                X = t(X, W, V, Y, C[P + 13], O, 1309151649);\r\n                Y = t(Y, X, W, V, C[P + 4], U, 4149444226);\r\n                V = t(V, Y, X, W, C[P + 11], T, 3174756917);\r\n                W = t(W, V, Y, X, C[P + 2], R, 718787259);\r\n                X = t(X, W, V, Y, C[P + 9], O, 3951481745);\r\n                Y = K(Y, h);\r\n                X = K(X, E);\r\n                W = K(W, v);\r\n                V = K(V, g)\r\n            }\r\n            var i = B(Y) + B(X) + B(W) + B(V);\r\n            return i.toLowerCase()\r\n          \r\n        };\r\n\r\n        var size = size || 80;\r\n        var d ='wavatar';\r\n\r\n        return 'http://www.gravatar.com/avatar/' + MD5(email) + '.jpg?s=' + size+'&d='+d;\r\n    }\r\n    // if(!curAdmin)alert ('curadmin not set');\r\n    var Cat = StackMob.Model.extend({\r\n        schemaName:'cat'\r\n    });\r\n    var Cats = StackMob.Collection.extend({\r\n        model:Cat\r\n    });\r\n       \r\n    var LoginView = Backbone.View.extend({\r\n        el: 'body',\r\n        events: {\r\n            \"click #login-btn\": \"validate\",\r\n            \"click #problems-btn\":\"problem\",\r\n            \"keypress #username\": \"onEnter\",\r\n            \"keypress #pass\": \"onEnter\"\r\n        },\r\n        initialize: function() {\r\n            this.template = _.template($('#item-login').html());\r\n          //  this.render();//rendering in this.brm \r\n        },\r\n        render: function() {\r\n            var el = this.$el;\r\n         //   el.empty();\r\n            el.append(this.template());\r\n            return this;\r\n        },\r\n        onEnter: function(e) {\r\n            console.debug(e.keyCode);\r\n            if (e.keyCode == 13) {\r\n                if ($('#username').val().replace(/\\W/g, '') === '') $('#username').focus();\r\n                else if ($('#pass').val().replace(/\\W/g, '') === '') $('#pass').focus();\r\n                else this.validate();\r\n            }\r\n\r\n        },\r\n        validate: function() {\r\n            var u = $('#username').val().replace(/\\W/g, '');\r\n            var p = $('#pass').val().replace(/\\W/g, '');\r\n            console.log('user: ' + u + \" password: \" + p);\r\n            if (p === '' || u === '') this.loginError();\r\n            else this.admin_login(u, p);\r\n        },\r\n        //logging in---------------------------------------------------------------\r\n        admin_login: function(user_name, user_pass) {\r\n            var user = new StackMob.User({\r\n                username: user_name,\r\n                password: user_pass\r\n            });\r\n            user.login(false, {\r\n                success: function(model) {\r\n                    // redirect user to a new page\r\n                    //admin=model;//because its not the same as StackMob.Model\r\n                    console.debug(model);//assign this to user object\r\n                    \r\n                    console.debug(' navigating to main view');\r\n                    majokosiAdminApp.navigate('/home',true);\r\n                },\r\n                error: function(model, response) {\r\n                    console.debug(response);\r\n                }\r\n            });\r\n            console.debug(user.toJSON());\r\n        },\r\n        loginError: function() {\r\n            console.debug('login error function called');\r\n        },\r\n        problem:function(){\r\n            console.debug('having problems');//problemview on body\r\n            majokosiAdminApp.navigate('/problem',true);\r\n        }\r\n    });\r\n\r\n    var MainView = Backbone.View.extend({\r\n        el: 'body',\r\n        events: {\r\n            \"click #menu-btn\":\"toggleSidebar\",\r\n            \"click #home-btn\":\"navHome\",\r\n            \"click .user-login\":\"showUserDialogue\"\r\n        },\r\n        sidebarVisible:false,\r\n        initialize: function() {\r\n            this.model = this.options.model;\r\n            this.model.bind('all', this.refresh,this);\r\n            this.template=_.template($('#item-main').html());\r\n            //this.add_cat_template=_.template($('#item-add').html);//same for editting\r\n            //this.add_user_template=_.template($('#item-add').html);//same for editing\r\n            //this.add_joke_template=_.template($('#item-add').html);//same for editing\r\n            //this.render();//rendering in this.brm \r\n\r\n        },\r\n        render: function() {\r\n            var el = this.$el;\r\n        //    el.empty();\r\n            el.append(this.template(this.model.toJSON()));\r\n            $('.avatar img').attr('src',function(){\r\n                //console.debug(admin.toJSON().email);\r\n                //maybe check to see if email exists\r\n                return get_gravatar(admin.toJSON().email,80);\r\n            });\r\n            this.sidebarVisible=false;\r\n            //removing this next part to implement region managers\r\n            //this.homeView = new HomeView();\r\n        //    $('.view-container').append(this.homeView.render().el);\r\n          //  this.goHome();\r\n            return this;\r\n        },\r\n        refresh:function(){\r\n            majokosiAdminApp.navigate('/',true);\r\n        },\r\n        navHome:function(){\r\n            majokosiAdminApp.navigate('/home',true);\r\n           // majokosiAdminApp.navigate('/',true);\r\n        },\r\n        goHome: function(){\r\n            console.debug('going home, showing homeview');\r\n            if(!this.homeView){\r\n                \r\n            console.debug('gohome: homeview doesnt exist');\r\n            this.homeView = new HomeView();\r\n                    this.homeView.parent = this;\r\n            }else{\r\n                console.debug('gohome: homeview exists');\r\n                this.homeView.delegateEvents();\r\n                if(this.sideBarView){\r\n                    this.sideBarView.delegateEvents();\r\n                }\r\n                \r\n            }\r\n           // majokosiAdminApp.navigate('/home',true);\r\n           majokosiAdminApp.prm.showView(this.homeView);\r\n        },\r\n         goCats: function(){\r\n            console.debug('going cats,fetching , showing catsview');\r\n            if(!cats) \r\n                cats = new Cats();\r\n            cats.fetch({\r\n                success:function(){\r\n                    console.debug('mainview,gocats:cats have been fetched');\r\n                    this.catsView = new CatsView({collection:cats});\r\n                    this.catsView.parent = this;\r\n                    majokosiAdminApp.prm.showView(this.catsView);\r\n                },\r\n                error:function(){\r\n                    //do something\r\n                    //show alert\r\n                    console.debug('mainview,gocats:cats have been fetched');\r\n                }\r\n            });\r\n           // majokosiAdminApp.navigate('/home',true);  \r\n        },\r\n         goUsers: function(){\r\n            console.debug('going users, showing usersview');\r\n            this.usersView = new UsersView();\r\n            this.usersView.parent = this;\r\n           // majokosiAdminApp.navigate('/home',true);\r\n           majokosiAdminApp.prm.showView(this.usersView);\r\n        },\r\n         goJokes: function(){\r\n            console.debug('going jokes, showing jokesview');\r\n            this.jokesView = new JokesView();\r\n            this.jokesView.parent = this;\r\n           // majokosiAdminApp.navigate('/home',true);\r\n           majokosiAdminApp.prm.showView(this.jokesView);\r\n        },\r\n         goStats: function(){\r\n            console.debug('going stats, showing statsview');\r\n            this.statsView = new StatsView();\r\n            this.statsView.parent = this;\r\n           // majokosiAdminApp.navigate('/home',true);\r\n           majokosiAdminApp.prm.showView(this.statsView);\r\n        },\r\n        showUserDialogue:function(){\r\n            console.debug('user dialog');\r\n        },\r\n        toggleSidebar: function() {\r\n            console.debug('toggling sidebar');\r\n            if (this.sidebarVisible === false) {\r\n                this.sidebarVisible = true;\r\n                console.debug('making sidebar visible');\r\n                if (!this.sideBarView) {\r\n                    console.debug('sidebar doesnt exist lets make it');\r\n                    this.sideBarView = new SideBarView();\r\n                    this.sideBarView.parent = this;\r\n                    $('.page-sidebar').append(this.sideBarView.render().el);\r\n                }\r\n                else {\r\n                    console.debug('sidebar exists we just need to show it');\r\n                    if($('.page-sidebar').html()==''){\r\n                        $('.page-sidebar').append(this.sideBarView.render().el);\r\n                        console.debug('rerendering sidebar');\r\n                    }\r\n                    }\r\n                $('.page').addClass('with-sidebar'); //animate\r\n                $('.page-sidebar').animate({ width: \"show\"}, 1000, \"easeOutBounce\");\r\n\r\n            }\r\n            else {\r\n                console.debug('hiding sidebar');\r\n                this.sidebarVisible = false;\r\n                 $('.page').removeClass('with-sidebar');\r\n                $('.page-sidebar').animate({ width: \"hide\"}, 1000, \"easeOutBounce\",function(){\r\n                       \r\n                    }\r\n                );//animate\r\n            }\r\n\r\n        }\r\n    });\r\n    var HomeView = Backbone.View.extend({\r\n        /*el: '',*/\r\n        id:\"home-content\",\r\n        className:\"page-region-content tiles\", \r\n        events: {\r\n            'click #cats-pane': 'goToCats',\r\n            'click #stats-pane': 'goToStats',\r\n            'click #jokes-pane': 'goToJokes',\r\n            'click #users-pane': 'goToUsers'\r\n        },\r\n        initialize: function() {\r\n            this.template = _.template($('#item-home').html());\r\n        },\r\n        render: function() {\r\n            var el = this.$el;\r\n          //  $('.page-region-content').remove();\r\n            //el.append(this.template());\r\n            el.html(this.template());\r\n         \r\n            return this;\r\n        },\r\n        goToUsers:function(){\r\n            //navigate\r\n             majokosiAdminApp.navigate('/users',true);\r\n        },\r\n        goToCats:function(){\r\n             majokosiAdminApp.navigate('/categories',true);\r\n        },\r\n        goToJokes:function(){\r\n             majokosiAdminApp.navigate('/jokes',true);\r\n        },\r\n        goToStats:function(){\r\n             majokosiAdminApp.navigate('/statistics',true);\r\n        }\r\n    });\r\n    var SideBarView = Backbone.View.extend({\r\n        //el:'',\r\n        tagName:'ul',\r\n        events:{\r\n            \"click #m-stats\":\"goStats\",\r\n            \"click #m-jokes\":\"goJokes\",\r\n            \"click #m-jokes-new\":\"goJokesNew\",\r\n            \"click #m-jokes-reported\":\"goJokesReported\",\r\n            \"click #m-jokes-removed\":\"goJokesRemoved\",\r\n            \"click #m-cats\":\"goCats\",\r\n            \"click #m-cats-new\":\"goCatsNew\",\r\n            \"click #m-users\":\"goUsers\",\r\n            \"click #m-users-new\":\"goUsersNew\",\r\n            \"click #m-users-find\":\"goUsersFind\",\r\n            \"click #m-users-reported\":\"goUsersReported\",\r\n            \"click #m-users-blacklist\":\"goUsersBlacklist\",\r\n            \"click #m-help\":\"goHelp\"\r\n        },\r\n        initialize:function(){\r\n            this.template=_.template($('#item-sidebar').html());\r\n        },\r\n        render: function(){\r\n            var el = this.$el;\r\n            console.debug('rendering sidebarview');\r\n            //$('.page-sidebar').empty();//can be remove on this.class\r\n            el.html(this.template());\r\n            return this;   \r\n        },\r\n        goJokes:function(){\r\n            majokosiAdminApp.navigate('/jokes',true);\r\n        },\r\n        goJokesNew:function(){},\r\n        goJokesReported:function(){},\r\n        goJokesRemoved:function(){},\r\n        goCats:function(){\r\n            majokosiAdminApp.navigate('/categories',true);\r\n        },\r\n        goCatsNew:function(){\r\n             \r\n                var el =_.template($('#item-cats-new').html());\r\n                //var el =;\r\n                 $.Dialog({\r\n                     'title': 'Add new category',\r\n                     'content': el(),//el,//el(model.toJSON());n\r\n                     'draggable': true,\r\n                     'overlay': true,\r\n                     'closeButton': true,\r\n                     'buttonsAlign': 'right',\r\n                     'position': {\r\n                         'zone': 'center'\r\n                     },\r\n                     'buttons': {\r\n                         'save': {\r\n                             'action': function() {}\r\n                         },\r\n                         'cancel': {\r\n                             'action': function() {}\r\n                         }\r\n                     }\r\n                 });\r\n              \r\n        },\r\n        goCatsEdit:function(id){\r\n            /*\r\n                            <div>\r\n                                <label>Title</label>\r\n                                <input id=\"title\" type=\"text\" />\r\n                            </div>\r\n                            <div>\r\n                                <label>title(shona)</label>\r\n                                <input id=\"title_sh\" type=\"text\" />\r\n                            </div>\r\n                            <div>\r\n                                <label>Title (ndebele)</label>\r\n                                <input id=\"title_nd\" type=\"text\" />\r\n                            </div>\r\n                            <div>\r\n                                <label>count</label>\r\n                                <spab>\r\n                            </div>\r\n                            <div>\r\n                                <label>Icon</label>\r\n                            </div>\r\n            */\r\n            console.debug('gocatsedit:rendering dialogbox');\r\n            var model = cats.get(id);\r\n            console.debug('id:'+id);\r\n            console.debug(model);\r\n            var m= model.toJSON();\r\n            var el ='<div><label>Title</label><input id=\"title\" type=\"text\"'; \r\n            if(m.title)el+='value=\"'+m.title+'\"';\r\n            el+='/></div><div><label>title(shona)</label><input id=\"title_sh\" type=\"text\" ';\r\n            if(m.title_sh)el+='value=\"'+m.title_sh+'\"';\r\n            el+='/></div><div><label>Title (ndebele)</label><input id=\"title_nd\" type=\"text\" ';\r\n            if(m.title_nd)el+='value=\"'+m.title_nd+'\"';\r\n            el+='/></div><div><label>count</label><span>';\r\n            if(m.count)el+=m.count;\r\n              else el+= 0 ;\r\n            el+='</span></div><div><label>Icon</label></div>';// image gallery in the last div\r\n                            //_.template($('#item-cats-edit').html());\r\n                //var el =;\r\n                 $.Dialog({\r\n                     model:model,\r\n                     'title': 'edit category',\r\n                     'content': el,//el(model.toJSON());n\r\n                     'draggable': true,\r\n                     'overlay': true,\r\n                     'closeButton': true,\r\n                     'buttonsAlign': 'right',\r\n                     'position': {\r\n                         'zone': 'center'\r\n                     },\r\n                     'buttons': {\r\n                         \r\n                         'save': {\r\n                             'action': function() {\r\n                                // console.debug(this);\r\n                                console.debug(m);//fingers crossed \r\n                             }\r\n                         },\r\n                         'delete':{\r\n                             'action':function(){}\r\n                         },\r\n                         'cancel': {\r\n                             'action': function() {}\r\n                         }\r\n                     }\r\n                 });\r\n        },\r\n        goStats:function(){\r\n            majokosiAdminApp.navigate('/statistics',true);\r\n        },\r\n        goUsers:function(){\r\n            majokosiAdminApp.navigate('/users',true);\r\n        },\r\n        goUsersNew:function(){},\r\n        goUsersFind:function(){},\r\n        goUsersReported:function(){},\r\n        goUsersBlacklist:function(){},\r\n        goHelp:function(){}\r\n        \r\n    });\r\n    var UpdateView = Backbone.View.extend({// pass in type in the options \r\n        id:'',\r\n       className:'',\r\n       events:{},\r\n       initialize:function(){\r\n           \r\n       },\r\n       render:function(){\r\n           \r\n       }\r\n    });\r\n    var AddView = Backbone.View.extend({});//dialog box no need for view object\r\n    var FindView = Backbone.View.extend({});//dialog box no need for view object\r\n    var HelpView = Backbone.View.extend({\r\n        id:'',\r\n       className:'',\r\n       events:{},\r\n       initialize:function(){\r\n           \r\n       },\r\n       render:function(){\r\n           \r\n       }\r\n    });\r\n    var CatsView = Backbone.View.extend({\r\n        //el: '',\r\n        id:\"cat-content\",\r\n        className:\"page-region-content \",\r\n        events: {\r\n            \"click tr\":\"showCatEdit\"\r\n        },\r\n        initialize: function() {\r\n            this.template = _.template($('#item-cats').html());\r\n            //this.rowTemplate= _.template($('#item-cats-row').html());\r\n        },\r\n        render: function() {\r\n            var el=this.$el;\r\n            var collection = this.collection;\r\n          //  $('.page-region-content').remove();\r\n            el.append(this.template());\r\n            collection.each(function(cat){\r\n                var c = cat.toJSON();\r\n                var row='';\r\n                    row+='<tr data-id=\"'+c.cat_id+'\">'\r\n                        row += '<td>';\r\n                            if (c.title) row += c.title;\r\n                                else row += 'not set';\r\n                        row += '</td>'\r\n                        row += '<td>';\r\n                            if (c.icon) row += c.icon;\r\n                                else row += 'not set';\r\n                        row += '</td>'\r\n                        row += '<td>';\r\n                            if (c.title_sh) row += c.title_sh;\r\n                                else row += 'not set';\r\n                        row += '</td>'\r\n                        row += '<td>';\r\n                            if (c.title_nd) row += c.title_nd;\r\n                                else row += 'not set';\r\n                        row += '</td>'\r\n                        row += '<td>';\r\n                            if (c.count) row += c.count;\r\n                                else row += 'not set';\r\n                        row += '</td>'\r\n                    row+='</tr>'\r\n                el.find('tbody').append(row);    \r\n                //'<img src ='c.icon+'/>'\r\n            });\r\n\r\n            return this;\r\n        },\r\n        showCatEdit:function(ev){\r\n            console.debug('showcatedit:tr clicked')\r\n            if (!this.parent.sideBarView){\r\n                this.parent.sideBarView=new SideBarView();\r\n                this.parent.sideBarView.parent = this.parent;\r\n            }\r\n            console.debug($(ev.target).data('id'));\r\n           // console.debug(ev);\r\n            //console.debug(ev.target);\r\n            console.debug($(ev.target).parent());\r\n            this.parent.sideBarView.goCatsEdit($(ev.target).parent().data('id'));\r\n            \r\n        },\r\n        showCatNew:function(ev){\r\n            if (!this.parent.sideBarView){\r\n                this.parent.sideBarView=new SideBarView();\r\n                this.parent.sideBarView.parent = this.parent;\r\n            }\r\n            this.parent.sideBarView.goCatsNew();\r\n            \r\n        }\r\n    });\r\n    var UsersView = Backbone.View.extend({\r\n        id:\"user-content\",\r\n        className:\"page-region-content \",\r\n        events: {\r\n\r\n        },\r\n        initialize: function() {\r\n            this.template= _.template($('#item-users').html());\r\n        },\r\n        render: function() {\r\n            var el=this.$el;\r\n          //  $('.page-region-content').remove();\r\n            el.append(this.template());\r\n            return this;\r\n        }\r\n    });\r\n    var JokesView = Backbone.View.extend({\r\n                //el: '',\r\n        id:\"joke-content\",\r\n        className:\"page-region-content \",\r\n        events: {\r\n\r\n        },\r\n        initialize: function() {\r\n            this.template= _.template($('#item-jokes').html());\r\n        },\r\n        render: function() {\r\n            var el=this.$el;\r\n        //    $('.page-region-content').remove();\r\n            el.append(this.template());\r\n            return this;\r\n        }\r\n    });\r\n    var StatsView = Backbone.View.extend({\r\n            //el: '',\r\n        id:\"stat-content\",\r\n        className:\"page-region-content \",\r\n        events: {\r\n\r\n        },\r\n        initialize: function() {\r\n            this.template= _.template($('#item-stats').html());\r\n        },\r\n        render: function() {\r\n            var el = this.$el;\r\n           // $('.page-region-content').remove();\r\n            el.append(this.template());\r\n            return this;\r\n        }\r\n    });\r\n    var NavBarView = Backbone.View.extend({\r\n        el:'',\r\n        events:{\r\n            \r\n        },\r\n        initialize:function(){\r\n            \r\n        },\r\n        render:function(){\r\n            \r\n        }\r\n    });\r\n    function PageRegionManager() {\r\n\r\n        this.showView = function(view) {\r\n            if(this.currentView && this.currentView!==view) {\r\n                console.debug('prm: closing currentview');\r\n                this.currentView.close();\r\n            }\r\n            this.currentView = view;\r\n            //this.currentView.render();\r\n            $(\".view-container\").html(this.currentView.render().el);\r\n        }\r\n\r\n    }\r\n    function BodyRegionManager() { //for body top level views\r\n        this.showView = function(view) {\r\n            if (this.currentView !== view || $('body').html()==='') {\r\n                if (this.currentView && this.currentView !== view) {\r\n                    this.currentView.close();\r\n                }\r\n                else {\r\n                    $('body').empty();\r\n                    console.debug('brm: emptying body');\r\n                }\r\n                this.currentView = view;\r\n                //this.currentView.render();\r\n                //$(\"body\").html(this.currentView.render().el);\r\n                this.currentView.render();\r\n            }\r\n            else console.debug('cant close and open the same view');\r\n    \r\n        }\r\n    }\r\n    var AppRouter = Backbone.Router.extend({\r\n        routes:{\r\n            '':'login',\r\n            'home':'main',\r\n            'statistics':'toStats',\r\n            'categories':'toCats',\r\n            'users':'toUsers',\r\n            'jokes':'toJokes',\r\n            'problem':'toProblem'\r\n        },\r\n        initialize:function(){\r\n            this.prm = new PageRegionManager();\r\n            this.brm = new BodyRegionManager();\r\n        },\r\n        getUser:function(name){\r\n            if(!admin){\r\n            //console.debug('getUser:about to fetch user');\r\n            var user = new StackMob.User({username:name});\r\n            //console.debug('getUser:fetching user');\r\n            user.fetch({\r\n                success:function(){\r\n                    admin = user;\r\n                console.debug('user fetched');\r\n                console.debug(user);\r\n                },\r\n                error:function(){\r\n                    console.debug('user  fetch error');\r\n                }\r\n            });\r\n           // return user;\r\n            }\r\n            else {\r\n                console.debug('admin already exists');\r\n                console.debug(admin);\r\n             //   return admin;\r\n                }\r\n        },\r\n        login:function(){\r\n            console.log(\"login route\");\r\n            $('body').empty();\r\n            ar = this;\r\n            StackMob.isLoggedIn({\r\n                yes:function(username){\r\n                    console.log(username+\" :is logged in\");\r\n                    //get user and navigate to home\r\n                    ar.getUser(username);\r\n                    ar.navigate('/home',true)\r\n                },\r\n                no:function(){\r\n                    console.log(\"no user logged in\");\r\n                   ar.brm.showView(new LoginView());\r\n                }/*,\r\n                error:function(){\r\n                    console.log(\"error\");\r\n                }*/\r\n            });\r\n        },\r\n        main:function(){\r\n            //check if user is logged on if user object is not there fetch it\r\n            console.debug('main function :routing to main view');\r\n            ar = this;\r\n            StackMob.isLoggedIn({\r\n                yes:function(username){\r\n                    console.log(username+\" :is logged in\");\r\n                   // ar.getUser(username);\r\n                    ////////////////////\r\n                    if (!admin) {\r\n                        //console.debug('getUser:about to fetch user');\r\n                        var user = new StackMob.User({\r\n                            username: username\r\n                        });\r\n                        //console.debug('getUser:fetching user');\r\n                        user.fetch({\r\n                            success: function() {\r\n                                admin = user;\r\n                                console.debug('user fetched');\r\n                                console.debug(user);\r\n                    \r\n                                if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goHome();\r\n                            },\r\n                            error: function() {\r\n                                console.debug('user  fetch error');\r\n                            }\r\n                        });\r\n                        // return user;\r\n                    }\r\n                    else {\r\n                        console.debug('admin already exists');\r\n                        console.debug(admin);\r\n                        if (!mainView){\r\n                            console.debug('mainview doesnt exist');\r\n                         mainView = new MainView({\r\n                                    model: admin\r\n                                });}\r\n                                else console.debug('mainview exists');\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goHome();\r\n                        //   return admin;\r\n                    }\r\n                    ////////////////////\r\n                    //get user and navigate to home\r\n                  //  majokosiAdminApp.navigate('/home',true)\r\n                    //ar.navigate('/home',true)\r\n                   \r\n                    \r\n                },\r\n                no:function(){\r\n                    console.log(\"no user logged in\");\r\n                   ar.brm.showView(new LoginView());\r\n                }/*,\r\n                error:function(){\r\n                    console.log(\"error\");\r\n                }*/\r\n            });\r\n            \r\n        },\r\n        toStats:function(){\r\n             \r\n             console.debug('tostats function :routing to stats view');\r\n            ar = this;\r\n            StackMob.isLoggedIn({\r\n                yes:function(username){\r\n                    console.log(username+\" :is logged in\");\r\n                    // ar.getUser(username);\r\n                    //get user and navigate to home\r\n                  //  majokosiAdminApp.navigate('/home',true)\r\n                    //ar.navigate('/home',true)\r\n                     ////////////////////\r\n                    if (!admin) {\r\n                        //console.debug('getUser:about to fetch user');\r\n                        var user = new StackMob.User({\r\n                            username: username\r\n                        });\r\n                        //console.debug('getUser:fetching user');\r\n                        user.fetch({\r\n                            success: function() {\r\n                                admin = user;\r\n                                console.debug('user fetched');\r\n                                console.debug(user);\r\n                    \r\n                                if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goStats();\r\n                            },\r\n                            error: function() {\r\n                                console.debug('user  fetch error');\r\n                            }\r\n                        });\r\n                        // return user;\r\n                    }\r\n                    else {\r\n                        console.debug('admin already exists');\r\n                        console.debug(admin);\r\n                        if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goStats();\r\n                        //   return admin;\r\n                    }\r\n                    ////////////////////\r\n                    \r\n                    \r\n                   \r\n                    \r\n                },\r\n                no:function(){\r\n                    console.log(\"no user logged in\");\r\n                   ar.brm.showView(new LoginView());\r\n                }/*,\r\n                error:function(){\r\n                    console.log(\"error\");\r\n                }*/\r\n            });\r\n        },\r\n        toCats:function(){\r\n             \r\n              console.debug('tocats function :routing to catsview');\r\n            ar = this;\r\n            StackMob.isLoggedIn({\r\n                yes:function(username){\r\n                    console.log(username+\" :is logged in\");\r\n                   //  ar.getUser(username);\r\n                    //get user and navigate to home\r\n                  //  majokosiAdminApp.navigate('/home',true)\r\n                    //ar.navigate('/home',true)\r\n                     ////////////////////\r\n                    if (!admin) {\r\n                        //console.debug('getUser:about to fetch user');\r\n                        var user = new StackMob.User({\r\n                            username: username\r\n                        });\r\n                        //console.debug('getUser:fetching user');\r\n                        user.fetch({\r\n                            success: function() {\r\n                                admin = user;\r\n                                console.debug('user fetched');\r\n                                console.debug(user);\r\n                    \r\n                                if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goCats();\r\n                            },\r\n                            error: function() {\r\n                                console.debug('user  fetch error');\r\n                            }\r\n                        });\r\n                        // return user;\r\n                    }\r\n                    else {\r\n                        console.debug('admin already exists');\r\n                        console.debug(admin);\r\n                         if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goCats();\r\n                        //   return admin;\r\n                    }\r\n                    ////////////////////\r\n                     //user model to be passed into the constructor\r\n                    \r\n                    \r\n                },\r\n                no:function(){\r\n                    console.log(\"no user logged in\");\r\n                   ar.brm.showView(new LoginView());\r\n                }/*,\r\n                error:function(){\r\n                    console.log(\"error\");\r\n                }*/\r\n            });\r\n             \r\n        },\r\n        toJokes:function(){\r\n            \r\n              console.debug('tojokes function :routing to jokes view');\r\n            ar = this;\r\n            StackMob.isLoggedIn({\r\n                yes:function(username){\r\n                    console.log(username+\" :is logged in\");\r\n                    // ar.getUser(username);\r\n                    //get user and navigate to home\r\n                  //  majokosiAdminApp.navigate('/home',true)\r\n                    //ar.navigate('/home',true)\r\n                     // user model to be passed into the constructor\r\n                      ////////////////////\r\n                    if (!admin) {\r\n                        //console.debug('getUser:about to fetch user');\r\n                        var user = new StackMob.User({\r\n                            username: username\r\n                        });\r\n                        //console.debug('getUser:fetching user');\r\n                        user.fetch({\r\n                            success: function() {\r\n                                admin = user;\r\n                                console.debug('user fetched');\r\n                                console.debug(user);\r\n                    \r\n                                if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goJokes();\r\n                            },\r\n                            error: function() {\r\n                                console.debug('user  fetch error');\r\n                            }\r\n                        });\r\n                        // return user;\r\n                    }\r\n                    else {\r\n                        console.debug('admin already exists');\r\n                        console.debug(admin);\r\n                         if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goJokes();\r\n                        //   return admin;\r\n                    }\r\n                    ////////////////////\r\n                    \r\n                    \r\n                },\r\n                no:function(){\r\n                    console.log(\"no user logged in\");\r\n                   ar.brm.showView(new LoginView());\r\n                }/*,\r\n                error:function(){\r\n                    console.log(\"error\");\r\n                }*/\r\n            });\r\n        },\r\n        toUsers:function(){\r\n             \r\n              console.debug('to users function :routing to users view');\r\n            ar = this;\r\n            StackMob.isLoggedIn({\r\n                yes:function(username){\r\n                    console.log(username+\" :is logged in\");\r\n                    // ar.getUser(username);\r\n                    //get user and navigate to home\r\n                  //  majokosiAdminApp.navigate('/home',true)\r\n                    //ar.navigate('/home',true)\r\n                     ////////////////////\r\n                    if (!admin) {\r\n                        //console.debug('getUser:about to fetch user');\r\n                        var user = new StackMob.User({\r\n                            username: username\r\n                        });\r\n                        //console.debug('getUser:fetching user');\r\n                        user.fetch({\r\n                            success: function() {\r\n                                admin = user;\r\n                                console.debug('user fetched');\r\n                                console.debug(user);\r\n                    \r\n                                if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                               // mainView.sidebarVisible=false;//reset it in case the page was refreshed\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goUsers();\r\n                            },\r\n                            error: function() {\r\n                                console.debug('user  fetch error');\r\n                            }\r\n                        });\r\n                        // return user;\r\n                    }\r\n                    else {\r\n                        console.debug('admin already exists');\r\n                        console.debug(admin);\r\n                        if (!mainView) mainView = new MainView({\r\n                                    model: admin\r\n                                });\r\n                                ar.brm.showView(mainView); // user model to be passed into the constructor\r\n                                mainView.goUsers();\r\n                        //   return admin;\r\n                    }\r\n                    ////////////////////\r\n                    // user model to be passed into the constructor\r\n                   \r\n                    \r\n                },\r\n                no:function(){\r\n                    console.log(\"no user logged in\");\r\n                   ar.brm.showView(new LoginView());\r\n                }/*,\r\n                error:function(){\r\n                    console.log(\"error\");\r\n                }*/\r\n            });\r\n        },\r\n        toProblem:function(){\r\n            console.debug('problem route fired');\r\n        }\r\n    });\r\nmajokosiAdminApp = new AppRouter();\r\nconsole.log(\"app launched\")\r\nBackbone.history.start();\r\nconsole.log(\"backbone history start\")\r\n});"]],"start1":0,"start2":0,"length1":0,"length2":47351}]],"length":47351,"saved":false}
{"contributors":[],"silentsave":true,"ts":1362132733826,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":12063,"start2":12063,"length1":32,"length2":30}]],"length":47349,"saved":false}
{"ts":1362132735806,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":12526,"start2":12526,"length1":32,"length2":30}]],"length":47347,"saved":false}
{"ts":1362132737359,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":14120,"start2":14120,"length1":32,"length2":30},{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":14209,"start2":14209,"length1":32,"length2":30}]],"length":47343,"saved":false}
{"ts":1362132738264,"patch":[[{"diffs":[[0,"         // "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":14263,"start2":14263,"length1":32,"length2":30}]],"length":47341,"saved":false}
{"ts":1362132739034,"patch":[[{"diffs":[[0,"         // "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":14896,"start2":14896,"length1":32,"length2":30}]],"length":47339,"saved":false}
{"ts":1362132739856,"patch":[[{"diffs":[[0,"\n           "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.prm"]],"start1":14947,"start2":14947,"length1":32,"length2":30}]],"length":47337,"saved":false}
{"ts":1362132743004,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.prm"]],"start1":15445,"start2":15445,"length1":32,"length2":30},{"diffs":[[0,"         // "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":15743,"start2":15743,"length1":32,"length2":30}]],"length":47333,"saved":false}
{"ts":1362132743806,"patch":[[{"diffs":[[0,"         // "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":15994,"start2":15994,"length1":32,"length2":30}]],"length":47331,"saved":false}
{"ts":1362132744582,"patch":[[{"diffs":[[0,"\n           "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.prm"]],"start1":16045,"start2":16045,"length1":32,"length2":30}]],"length":47329,"saved":false}
{"ts":1362132745348,"patch":[[{"diffs":[[0,"         // "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":16300,"start2":16300,"length1":32,"length2":30}]],"length":47327,"saved":false}
{"ts":1362132746294,"patch":[[{"diffs":[[0,"\n           "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.prm"]],"start1":16351,"start2":16351,"length1":32,"length2":30}]],"length":47325,"saved":false}
{"ts":1362132747134,"patch":[[{"diffs":[[0,"     // "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp"]],"start1":16610,"start2":16610,"length1":24,"length2":22}]],"length":47323,"saved":false}
{"ts":1362132748513,"patch":[[{"diffs":[[0,"\n           "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.prm"]],"start1":16657,"start2":16657,"length1":32,"length2":30},{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":19050,"start2":19050,"length1":32,"length2":30}]],"length":47319,"saved":false}
{"ts":1362132749325,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":19146,"start2":19146,"length1":32,"length2":30},{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":19248,"start2":19248,"length1":32,"length2":30}]],"length":47315,"saved":false}
{"ts":1362132750153,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":19345,"start2":19345,"length1":32,"length2":30},{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":20569,"start2":20569,"length1":32,"length2":30}]],"length":47311,"saved":false}
{"ts":1362132751000,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":20773,"start2":20773,"length1":32,"length2":30}]],"length":47309,"saved":false}
{"ts":1362132751984,"patch":[[{"diffs":[[0,"            "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":24779,"start2":24779,"length1":32,"length2":30},{"diffs":[[0,"        "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp"]],"start1":24882,"start2":24882,"length1":24,"length2":22}]],"length":47305,"saved":false}
{"ts":1362132752781,"patch":[[{"diffs":[[0,"        //  "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":35714,"start2":35714,"length1":32,"length2":30}]],"length":47303,"saved":false}
{"ts":1362132754502,"patch":[[{"diffs":[[0,"        //  "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":36568,"start2":36568,"length1":32,"length2":30},{"diffs":[[0,"        //  "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":39234,"start2":39234,"length1":32,"length2":30}]],"length":47299,"saved":false}
{"ts":1362132755368,"patch":[[{"diffs":[[0,"        //  "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp.nav"]],"start1":41943,"start2":41943,"length1":32,"length2":30}]],"length":47297,"saved":false}
{"ts":1362132756296,"patch":[[{"diffs":[[0,"    //  "],[-1,"majokosi"],[1,"afryka"],[0,"AdminApp"]],"start1":44647,"start2":44647,"length1":24,"length2":22}]],"length":47295,"saved":false}
{"ts":1362132757141,"patch":[[{"diffs":[[0,");\r\n"],[-1,"majokosi"],[1,"afryka"],[0,"Admi"]],"start1":47156,"start2":47156,"length1":16,"length2":14}]],"length":47293,"saved":false}
{"ts":1362134743536,"patch":[[{"diffs":[[0,"    var "],[-1,"jokes"],[1,"pro"],[0,";\r\n    f"]],"start1":751,"start2":751,"length1":21,"length2":19}]],"length":47291,"saved":false}
{"ts":1362134744390,"patch":[[{"diffs":[[0," var pro"],[1,"du"],[0,";\r\n    f"]],"start1":754,"start2":754,"length1":16,"length2":18}]],"length":47293,"saved":false}
{"ts":1362134746855,"patch":[[{"diffs":[[0,"ar produ"],[1,"c"],[0,";\r\n    f"]],"start1":756,"start2":756,"length1":16,"length2":17}]],"length":47294,"saved":false}
{"ts":1362134748785,"patch":[[{"diffs":[[0,"r produc"],[1,"ts"],[0,";\r\n    f"]],"start1":757,"start2":757,"length1":16,"length2":18}]],"length":47296,"saved":false}
{"ts":1362134938375,"patch":[[{"diffs":[[0,"kmwana\r\n"],[1,"//u\r\n"],[0,"Backbone"]],"start1":14,"start2":14,"length1":16,"length2":21}]],"length":47301,"saved":false}
{"ts":1362134939782,"patch":[[{"diffs":[[0,"ana\r\n//u"],[1,"po"],[0,"\r\nBackbo"]],"start1":17,"start2":17,"length1":16,"length2":18}]],"length":47303,"saved":false}
{"ts":1362134946996,"patch":[[{"diffs":[[0,"\r\n//"],[-1,"upo"],[0,"\r\nBa"]],"start1":20,"start2":20,"length1":11,"length2":8}]],"length":47300,"saved":false}
{"ts":1362134951889,"patch":[[{"diffs":[[0,"wana\r\n//"],[1,"deleted categosir"],[0,"\r\nBackbo"]],"start1":16,"start2":16,"length1":16,"length2":33}]],"length":47317,"saved":false}
{"ts":1362134953448,"patch":[[{"diffs":[[0,"tego"],[-1,"sir"],[0,"\r\nBa"]],"start1":34,"start2":34,"length1":11,"length2":8}]],"length":47314,"saved":false}
{"ts":1362134956857,"patch":[[{"diffs":[[0,"d catego"],[1,"ries should "],[0,"\r\nBackbo"]],"start1":30,"start2":30,"length1":16,"length2":28}]],"length":47326,"saved":false}
{"ts":1362134959470,"patch":[[{"diffs":[[0," should "],[1,"be cattered"],[0,"\r\nBackbo"]],"start1":42,"start2":42,"length1":16,"length2":27}]],"length":47337,"saved":false}
{"ts":1362134960273,"patch":[[{"diffs":[[0,"cattered"],[1," for "],[0,"\r\nBackbo"]],"start1":53,"start2":53,"length1":16,"length2":21}]],"length":47342,"saved":false}
{"ts":1362134961335,"patch":[[{"diffs":[[0,"red for "],[1,", ma"],[0,"\r\nBackbo"]],"start1":58,"start2":58,"length1":16,"length2":20}]],"length":47346,"saved":false}
{"ts":1362134965510,"patch":[[{"diffs":[[0,"for , ma"],[1,"ybe a clean up "],[0,"\r\nBackbo"]],"start1":62,"start2":62,"length1":16,"length2":31}]],"length":47361,"saved":false}
{"ts":1362134968293,"patch":[[{"diffs":[[0,"lean up "],[1,"button"],[0,"\r\nBackbo"]],"start1":77,"start2":77,"length1":16,"length2":22}]],"length":47367,"saved":false}
{"ts":1362134971831,"patch":[[{"diffs":[[0,"lean up "],[-1,"button"],[0,"\r\nBackbo"]],"start1":77,"start2":77,"length1":22,"length2":16}]],"length":47361,"saved":false}
{"ts":1362134974819,"patch":[[{"diffs":[[0,"lean up "],[1,"function after"],[0,"\r\nBackbo"]],"start1":77,"start2":77,"length1":16,"length2":30}]],"length":47375,"saved":false}
{"ts":1362134975712,"patch":[[{"diffs":[[0,"on after"],[1," a "],[0,"\r\nBackbo"]],"start1":91,"start2":91,"length1":16,"length2":19}]],"length":47378,"saved":false}
{"ts":1362134980745,"patch":[[{"diffs":[[0,"after a "],[1,"cat is deleted"],[0,"\r\nBackbo"]],"start1":94,"start2":94,"length1":16,"length2":30}]],"length":47392,"saved":false}
{"ts":1362134997423,"patch":[[{"diffs":[[0," deleted"],[1,", custom code"],[0,"\r\nBackbo"]],"start1":108,"start2":108,"length1":16,"length2":29}]],"length":47405,"saved":false}
{"ts":1362135005560,"patch":[[{"diffs":[[0,"var "],[-1,"users;"],[0,"\r\n  "]],"start1":848,"start2":848,"length1":14,"length2":8}]],"length":47399,"saved":false}
{"ts":1362135008942,"patch":[[{"diffs":[[0,"    var "],[1,"statu"],[0,"\r\n    va"]],"start1":844,"start2":844,"length1":16,"length2":21}]],"length":47404,"saved":false}
{"ts":1362135017258,"patch":[[{"diffs":[[0," var sta"],[-1,"tu"],[0,"\r\n    va"]],"start1":847,"start2":847,"length1":18,"length2":16}]],"length":47402,"saved":false}
{"ts":1362135018596,"patch":[[{"diffs":[[0," var sta"],[1,"tii"],[0,"\r\n    va"]],"start1":847,"start2":847,"length1":16,"length2":19}]],"length":47405,"saved":false}
{"ts":1362135087283,"patch":[[{"diffs":[[0,"ame:'cat"],[1,"egory"],[0,"'\r\n    }"]],"start1":10133,"start2":10133,"length1":16,"length2":21}]],"length":47410,"saved":false}
{"ts":1362135884906,"patch":[[{"diffs":[[0,"\"click #"],[-1,"lo"],[1,"btn"],[0,"gin-btn\""]],"start1":10336,"start2":10336,"length1":18,"length2":19}]],"length":47411,"saved":false}
{"ts":1362135886482,"patch":[[{"diffs":[[0,"ick #btn"],[-1,"gin"],[0,"-btn\": \""]],"start1":10339,"start2":10339,"length1":19,"length2":16}]],"length":47408,"saved":false}
{"ts":1362135889637,"patch":[[{"diffs":[[0,"ck #btn-"],[-1,"bt"],[1,"signin"],[0,"n\": \"val"]],"start1":10340,"start2":10340,"length1":18,"length2":22}]],"length":47412,"saved":false}
{"ts":1362135890938,"patch":[[{"diffs":[[0,"n-signin"],[-1,"n"],[0,"\": \"vali"]],"start1":10346,"start2":10346,"length1":17,"length2":16}]],"length":47411,"saved":false}
{"ts":1362135901036,"patch":[[{"diffs":[[0,"\"click #"],[1,"btn-"],[0,"problems"]],"start1":10382,"start2":10382,"length1":16,"length2":20}]],"length":47415,"saved":false}
{"ts":1362135905495,"patch":[[{"diffs":[[0,"problems"],[-1,"-btn"],[0,"\":\"probl"]],"start1":10394,"start2":10394,"length1":20,"length2":16}]],"length":47411,"saved":false}
{"ts":1362135998025,"patch":[[{"diffs":[[0,"\n         go"],[1,"Statu"],[0,"Users: funct"]],"start1":15926,"start2":15926,"length1":24,"length2":29}]],"length":47416,"saved":false}
{"ts":1362135999146,"patch":[[{"diffs":[[0," goStatu"],[1,"s"],[0,"Users: f"]],"start1":15935,"start2":15935,"length1":16,"length2":17}]],"length":47417,"saved":false}
{"ts":1362136001832,"patch":[[{"diffs":[[0,"goStatus"],[-1,"Users"],[0,": functi"]],"start1":15936,"start2":15936,"length1":21,"length2":16}]],"length":47412,"saved":false}
{"ts":1362136038818,"patch":[[{"diffs":[[0,"  goStat"],[-1,"us"],[1,"ii"],[0,": functi"]],"start1":15934,"start2":15934,"length1":18,"length2":18}]],"length":47412,"saved":false}
{"ts":1362136043680,"patch":[[{"diffs":[[0,"('going "],[-1,"u"],[0,"s"],[1,"tatii"],[0,"ers, sho"]],"start1":15984,"start2":15984,"length1":18,"length2":22}]],"length":47416,"saved":false}
{"ts":1362136045287,"patch":[[{"diffs":[[0,"g statii"],[-1,"ers"],[0,", showin"]],"start1":15990,"start2":15990,"length1":19,"length2":16}]],"length":47413,"saved":false}
{"ts":1362136050384,"patch":[[{"diffs":[[0,"ii, showing "],[1,"sta"],[0,"usersview');"]],"start1":15996,"start2":15996,"length1":24,"length2":27}]],"length":47416,"saved":false}
{"ts":1362136052104,"patch":[[{"diffs":[[0,"wing sta"],[-1,"use"],[1,"tii"],[0,"rsview')"]],"start1":16003,"start2":16003,"length1":19,"length2":19}]],"length":47416,"saved":false}
{"ts":1362136054029,"patch":[[{"diffs":[[0,"g statii"],[-1,"rs"],[0,"view');\r"]],"start1":16006,"start2":16006,"length1":18,"length2":16}]],"length":47414,"saved":false}
{"ts":1362136077027,"patch":[[{"diffs":[[0,"       this."],[-1,"users"],[1,"statii"],[0,"View = new U"]],"start1":16028,"start2":16028,"length1":29,"length2":30}]],"length":47415,"saved":false}
{"ts":1362136078574,"patch":[[{"diffs":[[0,"w = new "],[-1,"Users"],[1,"statii"],[0,"View();\r"]],"start1":16049,"start2":16049,"length1":21,"length2":22}]],"length":47416,"saved":false}
{"ts":1362136082980,"patch":[[{"diffs":[[0,"w = new "],[-1,"s"],[1,"S"],[0,"tatiiVie"]],"start1":16049,"start2":16049,"length1":17,"length2":17}]],"length":47416,"saved":false}
{"ts":1362136094824,"patch":[[{"diffs":[[0,"       this."],[-1,"users"],[1,"statii"],[0,"View.parent "]],"start1":16077,"start2":16077,"length1":29,"length2":30}]],"length":47417,"saved":false}
{"ts":1362136096436,"patch":[[{"diffs":[[0,"ew(this."],[-1,"users"],[1,"statii"],[0,"View);\r\n"]],"start1":16206,"start2":16206,"length1":21,"length2":22}]],"length":47418,"saved":false}
{"ts":1362136112971,"patch":[[{"diffs":[[0,"'click #"],[-1,"users"],[1,"statii"],[0,"-pane': "]],"start1":18718,"start2":18718,"length1":21,"length2":22}]],"length":47419,"saved":false}
{"ts":1362136117811,"patch":[[{"diffs":[[0,"': 'goTo"],[-1,"Users"],[1,"statii"],[0,"'\r\n     "]],"start1":18737,"start2":18737,"length1":21,"length2":22}]],"length":47420,"saved":false}
{"ts":1362136122065,"patch":[[{"diffs":[[0,"': 'goTo"],[-1,"s"],[1,"S"],[0,"tatii'\r\n"]],"start1":18737,"start2":18737,"length1":17,"length2":17}]],"length":47420,"saved":false}
{"ts":1362136133290,"patch":[[{"diffs":[[0,"    goTo"],[-1,"Users"],[1,"statii"],[0,":functio"]],"start1":19125,"start2":19125,"length1":21,"length2":22}]],"length":47421,"saved":false}
{"ts":1362136138374,"patch":[[{"diffs":[[0,"nApp.navigate('/"],[-1,"users"],[1,"statii"],[0,"',true);\r\n      "]],"start1":19200,"start2":19200,"length1":37,"length2":38}]],"length":47422,"saved":false}
{"ts":1362136143186,"patch":[[{"diffs":[[0," #m-"],[-1,"users\":\"goUsers"],[1,"statii\":\"gostatii"],[0,"\",\r\n"]],"start1":20004,"start2":20004,"length1":23,"length2":25}]],"length":47424,"saved":false}
{"ts":1362136144139,"patch":[[{"diffs":[[0,"lick #m-"],[-1,"users"],[1,"statii"],[0,"-new\":\"g"]],"start1":20043,"start2":20043,"length1":21,"length2":22}]],"length":47425,"saved":false}
{"ts":1362136147097,"patch":[[{"diffs":[[0,"new\":\"go"],[-1,"Users"],[1,"statii"],[0,"New\",\r\n "]],"start1":20058,"start2":20058,"length1":21,"length2":22}]],"length":47426,"saved":false}
{"ts":1362136149086,"patch":[[{"diffs":[[0,"lick #m-"],[-1,"users"],[1,"statii"],[0,"-find\":\""]],"start1":20093,"start2":20093,"length1":21,"length2":22},{"diffs":[[0,"ind\":\"go"],[-1,"Users"],[1,"statii"],[0,"Find\",\r\n"]],"start1":20109,"start2":20109,"length1":21,"length2":22}]],"length":47428,"saved":false}
{"ts":1362136150157,"patch":[[{"diffs":[[0,"lick #m-"],[-1,"users"],[1,"statii"],[0,"-reporte"]],"start1":20145,"start2":20145,"length1":21,"length2":22}]],"length":47429,"saved":false}
{"ts":1362136151090,"patch":[[{"diffs":[[0,"ted\":\"go"],[-1,"Users"],[1,"statii"],[0,"Reported"]],"start1":20165,"start2":20165,"length1":21,"length2":22}]],"length":47430,"saved":false}
{"ts":1362136152718,"patch":[[{"diffs":[[0,"lick #m-"],[-1,"users"],[1,"statii"],[0,"-blackli"]],"start1":20205,"start2":20205,"length1":21,"length2":22},{"diffs":[[0,"ist\":\"go"],[-1,"Users"],[1,"statii"],[0,"Blacklis"]],"start1":20226,"start2":20226,"length1":21,"length2":22}]],"length":47432,"saved":false}
{"ts":1362136156264,"patch":[[{"diffs":[[0,"      go"],[-1,"Users"],[1,"statii"],[0,":functio"]],"start1":24990,"start2":24990,"length1":21,"length2":22}]],"length":47433,"saved":false}
{"ts":1362136157474,"patch":[[{"diffs":[[0,"igate('/"],[-1,"users"],[1,"statii"],[0,"',true);"]],"start1":25048,"start2":25048,"length1":21,"length2":22}]],"length":47434,"saved":false}
{"ts":1362136159604,"patch":[[{"diffs":[[0,"      go"],[-1,"Users"],[1,"statii"],[0,"New:func"]],"start1":25086,"start2":25086,"length1":21,"length2":22},{"diffs":[[0,"      go"],[-1,"Users"],[1,"statii"],[0,"Find:fun"]],"start1":25121,"start2":25121,"length1":21,"length2":22}]],"length":47436,"saved":false}
{"ts":1362136162585,"patch":[[{"diffs":[[0,"      go"],[-1,"Users"],[1,"statii"],[0,"Reported"]],"start1":25157,"start2":25157,"length1":21,"length2":22},{"diffs":[[0,"      go"],[-1,"Users"],[1,"statii"],[0,"Blacklis"]],"start1":25197,"start2":25197,"length1":21,"length2":22}]],"length":47438,"saved":false}
{"ts":1362136168362,"patch":[[{"diffs":[[0,"    var "],[-1,"Users"],[1,"statii"],[0,"View = B"]],"start1":28683,"start2":28683,"length1":21,"length2":22}]],"length":47439,"saved":false}
{"ts":1362136171225,"patch":[[{"diffs":[[0,"('#item-"],[-1,"users"],[1,"statii"],[0,"').html("]],"start1":28905,"start2":28905,"length1":21,"length2":22}]],"length":47440,"saved":false}
{"ts":1362136173372,"patch":[[{"diffs":[[0,"   '"],[-1,"users':'toUsers"],[1,"statii':'tostatii"],[0,"',\r\n"]],"start1":31722,"start2":31722,"length1":23,"length2":25}]],"length":47442,"saved":false}
{"ts":1362136176321,"patch":[[{"diffs":[[0,"      to"],[-1,"Users"],[1,"statii"],[0,":functio"]],"start1":44406,"start2":44406,"length1":21,"length2":22},{"diffs":[[0,"bug('to "],[-1,"users"],[1,"statii"],[0," functio"]],"start1":44473,"start2":44473,"length1":21,"length2":22}]],"length":47444,"saved":false}
{"ts":1362136177370,"patch":[[{"diffs":[[0," to "],[-1,"users"],[1,"statii"],[0," vie"]],"start1":44505,"start2":44505,"length1":13,"length2":14}]],"length":47445,"saved":false}
{"ts":1362136179675,"patch":[[{"diffs":[[0,"     mainView.go"],[-1,"Users"],[1,"statii"],[0,"();\r\n           "]],"start1":45925,"start2":45925,"length1":37,"length2":38}]],"length":47446,"saved":false}
{"ts":1362136185966,"patch":[[{"diffs":[[0,"w.go"],[-1,"Users"],[1,"statii"],[0,"();\r"]],"start1":46665,"start2":46665,"length1":13,"length2":14}]],"length":47447,"saved":false}
{"ts":1362136190084,"patch":[[{"diffs":[[0,"     mainView.go"],[-1,"s"],[1,"S"],[0,"tatii();\r\n      "]],"start1":46653,"start2":46653,"length1":33,"length2":33}]],"length":47447,"saved":false}
{"ts":1362136195510,"patch":[[{"diffs":[[0,"nView.go"],[-1,"s"],[1,"S"],[0,"tatii();"]],"start1":45933,"start2":45933,"length1":17,"length2":17}]],"length":47447,"saved":false}
{"ts":1362136228970,"patch":[[{"diffs":[[0,"    goTo"],[-1,"s"],[1,"S"],[0,"tatii:fu"]],"start1":19125,"start2":19125,"length1":17,"length2":17}]],"length":47447,"saved":false}
{"ts":1362136242507,"patch":[[{"diffs":[[0,"-statii\":\"go"],[-1,"s"],[1,"S"],[0,"tatii\",\r\n   "]],"start1":20007,"start2":20007,"length1":25,"length2":25}]],"length":47447,"saved":false}
{"ts":1362136244568,"patch":[[{"diffs":[[0,"tii-new\":\"go"],[-1,"s"],[1,"S"],[0,"tatiiNew\",\r\n"]],"start1":20054,"start2":20054,"length1":25,"length2":25}]],"length":47447,"saved":false}
{"ts":1362136246420,"patch":[[{"diffs":[[0,"ii-find\":\"go"],[-1,"s"],[1,"S"],[0,"tatiiFind\",\r"]],"start1":20105,"start2":20105,"length1":25,"length2":25}]],"length":47447,"saved":false}
{"ts":1362136247882,"patch":[[{"diffs":[[0,"eported\":\"go"],[-1,"s"],[1,"S"],[0,"tatiiReporte"]],"start1":20161,"start2":20161,"length1":25,"length2":25},{"diffs":[[0,"ist\":\"go"],[-1,"s"],[0,"tatiiBla"]],"start1":20226,"start2":20226,"length1":17,"length2":16}]],"length":47446,"saved":false}
{"ts":1362136249188,"patch":[[{"diffs":[[0,"ist\":\"go"],[1,"S"],[0,"tatiiBla"]],"start1":20226,"start2":20226,"length1":16,"length2":17}]],"length":47447,"saved":false}
{"ts":1362136258739,"patch":[[{"diffs":[[0,"\r\n        go"],[-1,"s"],[1,"S"],[0,"tatii:functi"]],"start1":24986,"start2":24986,"length1":25,"length2":25}]],"length":47447,"saved":false}
{"ts":1362136267757,"patch":[[{"diffs":[[0,"\r\n        go"],[-1,"s"],[1,"S"],[0,"tatiiNew:fun"]],"start1":25082,"start2":25082,"length1":25,"length2":25},{"diffs":[[0,"\r\n        go"],[-1,"s"],[1,"S"],[0,"tatiiFind:fu"]],"start1":25117,"start2":25117,"length1":25,"length2":25}]],"length":47447,"saved":false}
{"ts":1362136269576,"patch":[[{"diffs":[[0,"\r\n        go"],[-1,"s"],[1,"S"],[0,"tatiiReporte"]],"start1":25153,"start2":25153,"length1":25,"length2":25},{"diffs":[[0,"      go"],[-1,"s"],[1,"S"],[0,"tatiiBla"]],"start1":25197,"start2":25197,"length1":17,"length2":17}]],"length":47447,"saved":false}
{"ts":1362136283211,"patch":[[{"diffs":[[0,");\r\n    var "],[-1,"s"],[1,"S"],[0,"tatiiView = "]],"start1":28679,"start2":28679,"length1":25,"length2":25}]],"length":47447,"saved":false}
{"ts":1362136307297,"patch":[[{"diffs":[[0,"tii':'to"],[-1,"s"],[1,"S"],[0,"tatii',\r"]],"start1":31729,"start2":31729,"length1":17,"length2":17}]],"length":47447,"saved":false}
{"ts":1362136317196,"patch":[[{"diffs":[[0,"      to"],[-1,"s"],[1,"S"],[0,"tatii:fu"]],"start1":44406,"start2":44406,"length1":17,"length2":17}]],"length":47447,"saved":false}
